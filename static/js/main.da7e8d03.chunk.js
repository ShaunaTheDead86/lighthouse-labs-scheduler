(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,n){},22:function(e,t,n){e.exports=n(51)},27:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(21),c=n.n(i),s=(n(27),n(6)),m=n(2),o=n(3),l=n(5),u=n.n(l);n(20);var d=n(4),p=n.n(d);n(46);function v(e){var t,n=p()("day-list__item",{"day-list__item--selected":e.selected,"day-list__item--full":!e.spots});return r.a.createElement("li",{className:n,onClick:function(){return e.setDay(e.name)},selected:e.selected,"data-testid":e.name},r.a.createElement("h2",{className:"text--regular"},e.name),r.a.createElement("h3",{className:"text--light"},0===(t=e.spots)?"no spots remaining":1===t?t+" spot remaining":t+" spots remaining"))}function E(e){var t=e.days.map(function(t){return r.a.createElement(v,{key:t.id,name:t.name,spots:t.spots,selected:t.name===e.value,setDay:e.onChange})});return r.a.createElement("ul",null,t)}function f(e){return r.a.createElement("header",{className:"appointment__time"},r.a.createElement("h4",{className:"text--semi-bold"},e.time),r.a.createElement("hr",{className:"appointment__separator"}))}function _(e){return r.a.createElement("main",{className:"appointment__card appointment__card--show"},r.a.createElement("section",{className:"appointment__card-left"},r.a.createElement("h2",{className:"text--regular"},e.student),r.a.createElement("section",{className:"interviewer"},r.a.createElement("h4",{className:"text--light"},"Interviewer"),r.a.createElement("h3",{className:"text--regular"},e.interviewer.name))),r.a.createElement("section",{className:"appointment__card-right"},r.a.createElement("section",{className:"appointment__actions"},r.a.createElement("img",{className:"appointment__actions-button",src:"images/edit.png",alt:"Edit",onClick:e.onEdit}),r.a.createElement("img",{className:"appointment__actions-button",src:"images/trash.png",alt:"Delete",onClick:e.onDelete}))))}function w(e){return r.a.createElement("main",{className:"appointment__add"},r.a.createElement("img",{className:"appointment__add-button",src:"images/add.png",alt:"Add",onClick:e.onAdd}))}n(47);function g(e){var t=p()("interviewers__item",{"interviewers__item--selected":e.selected});return r.a.createElement("li",{className:t,onClick:e.setInterviewer},r.a.createElement("img",{className:"interviewers__item-image",src:e.avatar,alt:e.name}),e.selected?e.name:"")}n(48);var b=function(e){var t=e.interviewers.map(function(t){return r.a.createElement(g,{key:t.id,name:t.name,avatar:t.avatar,selected:t.id===e.value,setInterviewer:function(){return e.onChange(t.id)}})});return r.a.createElement("section",{className:"interviewers"},r.a.createElement("h4",{className:"interviewers__header text--light"},"Interviewer"),r.a.createElement("ul",{className:"interviewers__list"},t))};n(49);function N(e){var t=p()("button",{"button--confirm":e.confirm,"button--danger":e.danger});return r.a.createElement("button",{className:t,onClick:e.onClick,disabled:e.disabled},e.children)}function h(e){var t=Object(a.useState)(e.student||""),n=Object(o.a)(t,2),i=n[0],c=n[1],s=Object(a.useState)(e.interviewer||null),m=Object(o.a)(s,2),l=m[0],u=m[1],d=Object(a.useState)(""),p=Object(o.a)(d,2),v=p[0],E=p[1];return r.a.createElement("main",{className:"appointment__card appointment__card--create"},r.a.createElement("section",{className:"appointment__card-left"},r.a.createElement("form",{autoComplete:"off",onSubmit:function(e){return e.preventDefault()}},r.a.createElement("input",{className:"appointment__create-input text--semi-bold",name:"name",type:"text",placeholder:"Enter Student Name",value:i,onChange:function(e){return c(e.target.value)},"data-testid":"student-name-input"}),r.a.createElement("section",{className:"appointment__validation"},v)),r.a.createElement(b,{interviewers:e.interviewers,value:l,onChange:u,interview:e.interview})),r.a.createElement("section",{className:"appointment__card-right"},r.a.createElement("section",{className:"appointment__actions"},r.a.createElement(N,{onClick:function(){c(""),u(""),E(""),e.onCancel()},danger:!0},"Cancel"),r.a.createElement(N,{onClick:function(){""!==i?null!==l?(E(""),e.onSave(i,l)):E("You must choose an interviewer"):E("Student name cannot be blank")},confirm:!0},"Save"))))}function C(e){return r.a.createElement("main",{className:"appointment__card appointment__card--status"},r.a.createElement("img",{className:"appointment__status-image",src:"images/status.png",alt:"Loading"}),r.a.createElement("h1",{className:"text--semi-bold"},e.message))}function O(e){return r.a.createElement("main",{className:"appointment__card appointment__card--confirm"},r.a.createElement("h1",{className:"text--semi-bold"},e.message),r.a.createElement("section",{className:"appointment__actions"},r.a.createElement(N,{onClick:e.onCancel,danger:!0},"Cancel"),r.a.createElement(N,{onClick:e.onConfirm,danger:!0},"Confirm")))}function y(e){return r.a.createElement("main",{className:"appointment__card appointment__card--error"},r.a.createElement("section",{className:"appointment__error-message"},r.a.createElement("h1",{className:"text--semi-bold"},"Error"),r.a.createElement("h3",{className:"text--light"},e.message)),r.a.createElement("img",{className:"appointment__error-close",src:"images/close.png",alt:"Close",onClick:e.onClose}))}var j=n(8);n(50);function k(e){var t="EMPTY",n="SHOW",i="SAVING",c="DELETING",s="ERROR_SAVE",m="ERROR_DELETE",l=function(e){var t=Object(a.useState)(e),n=Object(o.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)([e]),s=Object(o.a)(c,2),m=s[0],l=s[1];return{mode:r,transition:function(e,t){i(e),l(t?function(t){return[].concat(Object(j.a)(t.slice(0,-1)),[e])}:function(t){return[].concat(Object(j.a)(t),[e])})},back:function(){m.length>1?i(m[m.length-2]):i(m[0]),l(function(e){return Object(j.a)(e.slice(0,-1))})}}}(e.interview?n:t),u=l.mode,d=l.transition,p=l.back;function v(t,a){var r={student:t,interviewer:a};d(i),e.bookInterview(e.id,r).then(function(e){return d(n)}).catch(function(e){return d(s,!0)})}return r.a.createElement("article",{className:"appointment"},r.a.createElement(f,{time:e.time}),u===t&&r.a.createElement(w,{onAdd:function(){return d("CREATE")}}),u===n&&r.a.createElement(_,{student:null!==e.interview?e.interview.student:"",interviewer:null!==e.interview?e.interview.interviewer:"",onDelete:function(){return d("CONFIRM")},onEdit:function(){return d("EDIT")}}),"CREATE"===u&&r.a.createElement(h,{interviewers:e.interviewers,onCancel:function(){return p()},onSave:v}),"EDIT"===u&&r.a.createElement(h,{student:e.interview.student,interviewer:e.interview.interviewer.id,interviewers:e.interviewers,onCancel:function(){return p()},onSave:v}),u===i&&r.a.createElement(C,{message:"Saving"}),u===c&&r.a.createElement(C,{message:"Deleting"}),"CONFIRM"===u&&r.a.createElement(O,{message:"Are you sure you would like to delete?",onConfirm:function(){return n=e.id,d(c,!0),void e.cancelInterview(n).then(function(e){return d(t)}).catch(function(e){return d(m,!0)});var n},onCancel:function(){return p()}}),u===s&&r.a.createElement(y,{message:"There was an error while saving",onClose:function(){return p()}}),u===m&&r.a.createElement(y,{message:"There was an error while deleting",onClose:function(){return p()}}))}function I(e){var t=function(){var e=Object(a.useState)({day:"Monday",days:[],appointments:{},interviewers:{}}),t=Object(o.a)(e,2),n=t[0],r=t[1];function i(e){return n.days.map(function(t){return t.name===n.day?e?Object(m.a)({},t,{spots:t.spots+1}):Object(m.a)({},t,{spots:t.spots-1}):Object(m.a)({},t)})}return Object(a.useEffect)(function(){Promise.all([u.a.get("/api/days"),u.a.get("/api/appointments"),u.a.get("/api/interviewers")]).then(function(e){r(function(t){return Object(m.a)({},t,{days:e[0].data,appointments:e[1].data,interviewers:e[2].data})})})},[]),{state:n,setDay:function(e){return r(Object(m.a)({},n,{day:e}))},bookInterview:function(e,t){var a=Object(m.a)({},n.appointments[e],{interview:Object(m.a)({},t)}),c=Object(m.a)({},n.appointments,Object(s.a)({},e,a));return u.a.put("/api/appointments/"+e,{interview:t}).then(function(e){var t=i();r(function(e){return Object(m.a)({},e,{appointments:c,days:t})})})},cancelInterview:function(e){var t=Object(m.a)({},n.appointments[e],{interview:null}),a=Object(m.a)({},n.appointments,Object(s.a)({},e,t));return u.a.delete("/api/appointments/"+e).then(function(e){var t=i(!0);r(function(e){return Object(m.a)({},e,{appointments:a,days:t})})})}}}(),n=t.state,i=t.setDay,c=t.bookInterview,l=t.cancelInterview,d=function(e,t){var n=e.days.find(function(e){return e.name===t});return n?n.appointments.map(function(t){return e.appointments[t]}):[]}(n,n.day).map(function(e){var t=function(e,t){var n=Object.values(e.interviewers).filter(function(e){return null!==e&&null!==t?e.id===t.interviewer:null});return 0===n.length?null:{interviewer:n[0],student:t.student}}(n,e.interview),a=function(e,t){var n=e.days.find(function(e){return e.name===t});return n&&n.interviewers?n.interviewers.map(function(t){return e.interviewers[t]}):[]}(n,n.day);return r.a.createElement(k,{key:e.id,id:e.id,time:e.time,interview:t,interviewers:a,bookInterview:c,cancelInterview:l})});return r.a.createElement("main",{className:"layout"},r.a.createElement("section",{className:"sidebar"},r.a.createElement("img",{className:"sidebar--centered",src:"images/logo.png",alt:"Interview Scheduler"}),r.a.createElement("hr",{className:"sidebar__separator sidebar--centered"}),r.a.createElement("nav",{className:"sidebar__menu"},r.a.createElement(E,{days:n.days,value:n.day,onChange:i})),r.a.createElement("img",{className:"sidebar__lhl sidebar--centered",src:"images/lhl.png",alt:"Lighthouse Labs"})),r.a.createElement("section",{className:"schedule"},d,r.a.createElement(k,{key:"last",time:"5pm"})))}c.a.render(r.a.createElement(I,null),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.da7e8d03.chunk.js.map